<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Tour360 ‚Äì Visualizador 360¬∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Favicon -->
  <link rel="icon" href="icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#000000" />

  <style>
    /* bloqueia sele√ß√£o e overlay azul */
    html, body {
      -webkit-user-select: none;
      -ms-user-select: none;
      user-select: none;
      overscroll-behavior: none;
      touch-action: none;
      margin: 0; overflow: hidden; background: #000; font-family: sans-serif;
    }
    * { -webkit-touch-callout: none; -webkit-tap-highlight-color: transparent; }

    /* menu, bot√µes etc */
    #menu {
      position: absolute; top: 10px; left: 10px; z-index: 999;
      background: rgba(0,0,0,.5); color: #fff;
      padding: 8px; border-radius: 6px;
      display: flex; gap: 8px; align-items: center;
    }
    #menu label, #menu select, #menu button { font-size: 14px; color: #fff }
    #mediaSelect {
      padding: 6px; border-radius: 4px; border: none; cursor: pointer;
      min-width: 150px; background: #222; color: #fff;
    }
    #prevBtn, #nextBtn {
      padding: 6px 10px; font-size: 14px; border-radius: 4px;
      border: none; cursor: pointer;
      background: #007bff; color: #fff;
    }
    #prevBtn:hover, #nextBtn:hover { background: #0056b3 }
    canvas { touch-action: none }
  </style>
</head>
<body>
  <div id="menu">
    <label for="mediaSelect">M√≠dia:</label>
    <select id="mediaSelect"></select>
    <button id="prevBtn">Anterior</button>
    <button id="nextBtn">Pr√≥ximo</button>
  </div>

  <!-- Mapa de importa√ß√£o pros m√≥dulos -->
  <script type="importmap">
  { "imports": { "three": "https://unpkg.com/three@0.158.0/build/three.module.js" } }
  </script>
  <script type="module" src="js/loader.js"></script>

  <!-- Registro do Service Worker + detec√ß√£o do modo standalone -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker
        .register("./sw.js")
        .then(() => console.log("‚úÖ Service Worker registrado!"))
        .catch(err => console.warn("‚ùå SW falhou:", err));
    }

    const isStandalone =
      window.matchMedia('(display-mode: standalone)').matches ||
      window.navigator.standalone === true;

    if (isStandalone) {
      console.log("üì± Rodando como app instalado (PWA)");
    } else {
      console.log("üåê Rodando no navegador normal");
    }
  </script>
</body>
</html>
